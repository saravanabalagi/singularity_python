Bootstrap: docker
From: nvidia/cuda:10.1-cudnn7-devel-ubuntu16.04

%post

  # add deadsnakes ppa
  echo "deb http://ppa.launchpad.net/deadsnakes/ppa/ubuntu xenial main" >> etc/apt/sources.list
  echo "deb-src http://ppa.launchpad.net/deadsnakes/ppa/ubuntu xenial main" >> etc/apt/sources.list
  gpg --keyserver keyserver.ubuntu.com --recv-key f23c5a6cf475977595c89f51ba6932366a755776 && gpg --export --armor f23c5a6cf475977595c89f51ba6932366a755776 | apt-key add -

  apt update && apt install -y python3.8 python3.8-dev python3-setuptools python3.8-distutils
  python3.8 -m easy_install pip
  
  ln -sf /usr/bin/python3.8 /usr/bin/python3
  ln -sf /usr/bin/python3 /usr/bin/python
  ln -sf /usr/bin/pip3 /usr/bin/pip

  echo $(python --version), $(which python)
  echo $(pip --version), $(which pip)
  pip install --upgrade pip


%labels

  Author Saravanabalagi Ramachandran
  Email saravanabalagi@hotmail.com
  Repo https://github.com/saravanabalagi/singularity_python
  Version v1.0
